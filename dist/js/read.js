"use strict";define(["jquery","getUrl","base64","text!../html/readlist.html","template"],function(e,t,a,o,n){function r(){e.ajax({url:"/book/read",dataType:"json",data:{id:i,limit:s},async:!0,success:function(e){d(e)}})}function c(t){e(".reader__content p").css({fontSize:l+=t}),e(".reader__content h1").css({fontSize:l+=t})}function d(t){var a=document.createElement("script");a.src=t.jsonp,document.head.appendChild(a),e(".reader__content").empty(),window.duokan_fiction_chapter=function(t){var a=JSON.parse(e.base64().decode(t));n(a,".reader__content",o),e("#Tag__67").text(s+"/"+f)}}var i=t("id"),s=1,l=14,_=e(".read-list").html(),f=null;r(),e.ajax({url:"/book/read-list",dataType:"json",async:!0,success:function(t){f=t.item.toc.length,e(".addshow").empty(),n(t.item.toc,".addshow",_)}}),e(".reader__content").on("click",function(){e(".reader").addClass("reader_op")}),e(".reader__ft-font").on("click",function(t){e(".reader").toggleClass("reader_op-font")}),e(".reader__mask").on("click",function(){e(".reader").removeClass("reader_op reader_op-font")}),e(".reader__font-large").on("click",function(e){e.stopPropagation(),c(1)}),e(".reader__font-small").on("click",function(e){e.stopPropagation(),c(-1)}),e(".reader__ft-night").on("click",function(t){t.stopPropagation(),"0"==e(".reader_op").attr("data-night")?e(".reader_op").attr("data-night","1"):e(".reader_op").attr("data-night","0")}),e(".reader__font-bg").on("click","a",function(){e(".reader").attr("data-bg",e(this).data("bg"))}),e(".reader__toc").on("click",function(t){r(),t.stopPropagation(),e(".addshow").addClass("show")}),e(".addshow").on("click",".top__back",function(){e(".addshow").removeClass("show")}),e(".addshow").on("click","li",function(){e(".addshow").removeClass("show"),s=e(this).data("id"),r()}),e(".reader__prev-chapter").on("click",function(){s--,r()}),e(".reader__next-chapter").on("click",function(){s++,console.log(s),r()})});